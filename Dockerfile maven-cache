# syntax=docker/dockerfile:1
FROM ghcr.io/oliviercailloux/djm
WORKDIR /tmp/
COPY . .
ENV MAVEN_OPTS="-Djansi.force=true"
ENV MAVEN_CLI_OPTS="-Dstyle.color=always -B"
#Does not really download everything: running mvn test afterwards still requires new plugins
#RUN mvn $MAVEN_CLI_OPTS org.apache.maven.plugins:maven-dependency-plugin:3.3.0:resolve org.apache.maven.plugins:maven-dependency-plugin:3.3.0:resolve-plugins
RUN mvn $MAVEN_CLI_OPTS package
CMD ["jshell"]

